<!DOCTYPE html>
<html>
 <head>
  <title>JavaScript Tag Cloud Chart</title>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>
  <style>
    html, body, #container {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    }
  </style> 
 </head>
  <body onload="">
   <div id="container">
   </div>
  </body>
</html>

<script>
    var words = [];
    var freq = [];

    fetch("./words.json", { cache: 'no-store'}).then(function (response) {
    if (response.ok) {
        response.json()
        .then(function (resposta) {
            // console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

            words.push(resposta);
        });
    } else {
        console.error('Nenhum dado encontrado ou erro na API');
    }
    })
    .catch(function (error) {
        console.error(`Erro na obtenção dos dados: ${error.message}`);
    });
    console.log(words)

    fetch("./freq.json", { cache: 'no-store'}).then(function (response) {
    if (response.ok) {
        response.json()
        .then(function (resposta) {
            // console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

            freq.push(resposta);
        });
    } else {
        console.error('Nenhum dado encontrado ou erro na API');
    }
    })
    .catch(function (error) {
        console.error(`Erro na obtenção dos dados: ${error.message}`);
    });
    console.log(freq)

    
    // function teste() {
    //     let words = dados.valueInput;
    //     words = JSON.parse(words);
    //     words.word.forEach(value => {
    //     console.log(value);
    //     // name.freq.forEach(value=> {
    //     //     console.log(value)
    //     // })
    //     });
    // }


    function obterDados() {
        fetch("./test.json", { cache: 'no-store'}).then(function (response) {
        if (response.ok) {
            response.json()
            .then(function (resposta) {
                // console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                console.log(json.length)

                dadosWord = resposta;

                // for (let i = 0; i < resposta.length; i++) {
                //     const element = resposta[i];
                //     dadosWord[i].x.push(element.word);
                //     dadosWord[i].value.push(element.freq)

                //     console.log(dadosWord[i].x + "\n" + dadosWord[i].value)
                // }
                // wordcloud()
            });
        } else {
            console.error('Nenhum dado encontrado ou erro na API');
        }
    })
        .catch(function (error) {
            console.error(`Erro na obtenção dos dados: ${error.message}`);
        });
    }

    function wordcloud() {
        anychart.onDocumentReady(function() {
        var chart = anychart.tagCloud(dadosWord);
    
        // set a chart title
        chart.title('15 most spoken languages')
        // set an array of angles at which the words will be laid out
        chart.angles([0])
        // enable a color range
        chart.colorRange(true);
        // set the color range length
        chart.colorRange().length('80%');

        // display the word cloud chart
        chart.container("container");
        chart.draw();

        // format the tooltips
        var formatter = "{%value}{scale:(1)(1000)(1000)(1000)|( dozen)( thousand)( million)( billion)}";
        var tooltip = chart.tooltip();
        tooltip.format(formatter);
    });
    }

</script>